{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./sources/ext/quick_info.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","gantt","config","quickinfo_buttons","quick_info_detached","show_quick_info","attachEvent","id","setTimeout","showQuickInfo","events","hiding_function","_hideQuickInfo","length","templates","quick_info_title","start","end","ev","text","substr","quick_info_content","details","quick_info_date","task_time","quick_info_class","task","this","_quick_info_box_id","hideQuickInfo","pos","_get_event_counter_part","_quick_info_box","_init_quick_info","_quick_info_task","className","_prepare_quick_info_classname","_fill_quick_data","_show_quick_info","callEvent","forced","qi","taskId","parentNode","removeChild","style","right","left","event","window","e","keyCode","offset","nodeName","toLowerCase","$task_data","appendChild","width","offsetWidth","height","offsetHeight","scrolls","getScrollState","screen_width","$task","x","Math","min","max","dx","top","dy","$root","getTask","css","template","start_date","end_date","_quick_info_readonly","isReadonly","document","createElement","_waiAria","quickInfoAttr","html","ariaAttr","quickInfoHeaderAttrString","buttons","is_editor","icon_delete","icon_edit","quickInfoButtonAttrString","locale","labels","innerHTML","_qi_button_click","target","srcElement","code","which","node","box","mask","indexOf","$click","split","replace","domEv","getTaskNode","offsetTop","offsetLeft","offsetParent","scroll","$container","y","header","content","date","titleContent","firstChild","nextSibling","quickInfoHeader","join"],"mappings":"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","file":"ext/dhtmlxgantt_quick_info.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/codebase/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 183);\n","gantt.config.quickinfo_buttons = [\"icon_delete\",\"icon_edit\"];\r\ngantt.config.quick_info_detached = true;\r\ngantt.config.show_quick_info = true;\r\n\r\ngantt.attachEvent(\"onTaskClick\", function(id){\r\n\tsetTimeout(function() {\r\n\t\tgantt.showQuickInfo(id);\r\n\t}, 0);\r\n\t\r\n\treturn true;\r\n});\r\n\r\n(function(){\r\n\tvar events = [\"onEmptyClick\", \"onViewChange\", \"onLightbox\", \"onBeforeTaskDelete\", \"onBeforeDrag\"];\r\n\tvar hiding_function = function(){\r\n\t\tgantt._hideQuickInfo();\r\n\t\treturn true;\r\n\t};\r\n\tfor (var i=0; i<events.length; i++)\r\n\t\tgantt.attachEvent(events[i], hiding_function);\r\n})();\r\n\r\ngantt.templates.quick_info_title = function(start, end, ev){ return ev.text.substr(0,50); };\r\ngantt.templates.quick_info_content = function(start, end, ev){ return ev.details || ev.text; };\r\ngantt.templates.quick_info_date = function(start, end, ev){\r\n\t\treturn gantt.templates.task_time(start, end, ev);\r\n};\r\ngantt.templates.quick_info_class = function(start, end, task){ return \"\"; };\r\n\r\ngantt.showQuickInfo = function(id){\r\n\tif (id == this._quick_info_box_id || !this.config.show_quick_info) return;\r\n\tthis.hideQuickInfo(true);\r\n\tvar offset = 6; // offset TASK <> QI-BOX in 'px'\r\n\r\n\tvar pos = this._get_event_counter_part(id, offset);\r\n\t\r\n\tif (pos){\r\n\t\tthis._quick_info_box = this._init_quick_info(pos, id);\r\n\t\tthis._quick_info_task = id;\r\n\t\tthis._quick_info_box.className = gantt._prepare_quick_info_classname(id);\r\n\r\n\t\tthis._fill_quick_data(id);\r\n\t\tthis._show_quick_info(pos, offset);\r\n\t\tthis.callEvent(\"onQuickInfo\", [id]);\r\n\t}\r\n};\r\ngantt._hideQuickInfo = function(){\r\n\tgantt.hideQuickInfo();\r\n};\r\ngantt.hideQuickInfo = function(forced){\r\n\tvar qi = this._quick_info_box;\r\n\tthis._quick_info_box_id = 0;\r\n\tvar taskId = this._quick_info_task;\r\n\tthis._quick_info_task = null;\r\n\r\n\tif (qi && qi.parentNode){\r\n\r\n\t\tif (gantt.config.quick_info_detached) {\r\n\t\t\tthis.callEvent(\"onAfterQuickInfo\", [taskId]);\r\n\t\t\treturn qi.parentNode.removeChild(qi);\r\n\t\t}\r\n\r\n\t\tqi.className += \" gantt_qi_hidden\";\r\n\t\tif (qi.style.right == \"auto\")\r\n\t\t\tqi.style.left = \"-350px\";\r\n\t\telse\r\n\t\t\tqi.style.right = \"-350px\";\r\n\r\n\t\tif (forced) {\r\n\t\t\tqi.style.left = qi.style.right = \"\";\r\n\t\t\tqi.parentNode.removeChild(qi);\r\n\t\t}\r\n\t\tthis.callEvent(\"onAfterQuickInfo\", [taskId]);\r\n\t}\r\n};\r\ngantt.event(window, \"keydown\", function(e){\r\n\tif (e.keyCode == 27)\r\n\t\tgantt.hideQuickInfo();\r\n});\r\n\r\ngantt._show_quick_info = function(pos, offset){\r\n\tvar qi = gantt._quick_info_box;\r\n\tif (gantt.config.quick_info_detached){\r\n\t\tif (!qi.parentNode || \r\n\t\t\tqi.parentNode.nodeName.toLowerCase() == \"#document-fragment\")//IE8\r\n\t\t\tgantt.$task_data.appendChild(qi);\r\n\t\tvar width = qi.offsetWidth;\r\n\t\tvar height = qi.offsetHeight;\r\n\r\n\t\tvar scrolls = this.getScrollState();\r\n\t\tvar screen_width = this.$task.offsetWidth + scrolls.x - width;\r\n\r\n\t\t//pos.dy = (pos.top + height - scrolls.y > (gantt._y - gantt.config.scale_height)*0.96) ? 1 : 0; // uncomment to show QI at the bottom of task always\r\n\r\n\t\tqi.style.left = Math.min(Math.max(scrolls.x, pos.left - pos.dx*(width - pos.width)), screen_width) + \"px\";\r\n\t\tqi.style.top = pos.top - (pos.dy ? (height + pos.height + 2*offset) : 0) + \"px\";\r\n\t} else {\r\n\t\tqi.style.top = 20 + \"px\";\r\n\t\tif (pos.dx == 1){\r\n\t\t\tqi.style.right = \"auto\";\r\n\t\t\tqi.style.left = \"-300px\";\r\n\t\t\t\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tqi.style.left = \"10px\";\r\n\t\t\t},1);\r\n\t\t} else {\r\n\t\t\tqi.style.left = \"auto\";\r\n\t\t\tqi.style.right = \"-300px\";\r\n\t\t\t\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tqi.style.right = \"10px\";\r\n\t\t\t},1);\r\n\t\t}\r\n\t\tqi.className += \" gantt_qi_\"+(pos.dx == 1 ? \"left\" : \"right\");\r\n\t\tgantt.$root.appendChild(qi);\r\n\t}\r\n};\r\ngantt._prepare_quick_info_classname = function(id){\r\n\tvar task = gantt.getTask(id);\r\n\r\n\tvar css = \"gantt_cal_quick_info\",\r\n\t\ttemplate = this.templates.quick_info_class(task.start_date, task.end_date, task);\r\n\r\n\tif(template){\r\n\t\tcss += \" \" + template;\r\n\t}\r\n\treturn css;\r\n};\r\n\r\ngantt._init_quick_info = function(pos, id){\r\n\tvar task = gantt.getTask(id);\r\n\tif(typeof this._quick_info_readonly == \"boolean\"){\r\n\t\tif(this.isReadonly(task) !== this._quick_info_readonly){\r\n\t\t\tgantt.hideQuickInfo(true);\r\n\t\t\tthis._quick_info_box = null;\r\n\t\t}\r\n\t}\r\n\r\n\tthis._quick_info_readonly = this.isReadonly(task);\r\n\r\n\tif (!this._quick_info_box){\r\n\t\tvar qi = this._quick_info_box = document.createElement(\"div\");\r\n\r\n\t\tthis._waiAria.quickInfoAttr(qi);\r\n\r\n\r\n\t//title\r\n\t\tvar ariaAttr = gantt._waiAria.quickInfoHeaderAttrString();\r\n\t\tvar html = \"<div class=\\\"gantt_cal_qi_title\\\" \"+ariaAttr+\">\" +\r\n\t\t\t\"<div class=\\\"gantt_cal_qi_tcontent\\\"></div><div  class=\\\"gantt_cal_qi_tdate\\\"></div>\" +\r\n\t\t\t\"</div>\" +\r\n\t\t\t\"<div class=\\\"gantt_cal_qi_content\\\"></div>\";\r\n\r\n\t//buttons\r\n\t\thtml += \"<div class=\\\"gantt_cal_qi_controls\\\">\";\r\n\t\tvar buttons = gantt.config.quickinfo_buttons;\r\n\r\n\t\tvar is_editor = {\"icon_delete\":true,\"icon_edit\":true};\r\n\r\n\t\tfor (var i = 0; i < buttons.length; i++){\r\n\t\t\tif(this._quick_info_readonly && is_editor[buttons[i]])\r\n\t\t\t\tcontinue;\r\n\r\n\t\t\tvar ariaAttr = gantt._waiAria.quickInfoButtonAttrString(gantt.locale.labels[buttons[i]]);\r\n\r\n\t\t\thtml += \"<div class=\\\"gantt_qi_big_icon \"+buttons[i]+\"\\\" title=\\\"\"+gantt.locale.labels[buttons[i]]+\"\\\" \" + ariaAttr +\"><div class='gantt_menu_icon \" + buttons[i] + \"'></div><div>\"+gantt.locale.labels[buttons[i]]+\"</div></div>\";\r\n\t\t}\r\n\t\thtml += \"</div>\";\r\n\r\n\t\tqi.innerHTML = html;\r\n\r\n\t\tvar buttonClick = function(ev){\r\n\t\t\tev = ev || event;\r\n\t\t\tgantt._qi_button_click(ev.target || ev.srcElement);\r\n\t\t};\r\n\r\n\t\tgantt.event(qi, \"click\", buttonClick);\r\n\t\tgantt.event(qi, \"keypress\", function(e){\r\n\t\t\te = e || event;\r\n\t\t\tvar code = e.which||event.keyCode;\r\n\t\t\tif (code == 13 || code == 32){\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tgantt._qi_button_click(e.target || e.srcElement);\r\n\t\t\t\t},1);\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (gantt.config.quick_info_detached)\r\n\t\t\tgantt.event(gantt.$task_data, \"scroll\", function(){  gantt.hideQuickInfo(); });\r\n\t}\r\n\r\n\treturn this._quick_info_box;\r\n};\r\n\r\ngantt._qi_button_click = function(node){\r\n\tvar box = gantt._quick_info_box;\r\n\tif (!node || node == box) return;\r\n\r\n\tvar mask = node.className;\r\n\tif (mask.indexOf(\"_icon\")!=-1){\r\n\t\tvar id = gantt._quick_info_box_id;\r\n\t\tgantt.$click.buttons[mask.split(\" \")[1].replace(\"icon_\",\"\")](id);\r\n\t} else\r\n\t\tgantt._qi_button_click(node.parentNode);\r\n};\r\ngantt._get_event_counter_part = function(id, offset){\r\n\tvar domEv = gantt.getTaskNode(id);\r\n\tif (!domEv)\r\n\t\treturn null;\r\n\tvar left = 0;\r\n\tvar top = offset + domEv.offsetTop + domEv.offsetHeight;\r\n\r\n\tvar node = domEv;\r\n\twhile (node && node.className != \"gantt_task\"){\r\n\t\tleft += node.offsetLeft;\r\n\t \tnode = node.offsetParent;\r\n\t}\r\n\t\r\n\tvar scroll = this.getScrollState();\r\n\r\n\tif(node){\r\n\t\tvar dx = (left + domEv.offsetWidth/2) - scroll.x > (gantt.$container.offsetWidth/2) ? 1 : 0;\r\n\t\tvar dy = (top + domEv.offsetHeight/2) - scroll.y > (gantt.$container.offsetHeight/2) ? 1 : 0;\r\n\r\n\t\treturn { left:left, top:top, dx:dx, dy:dy,\r\n\t\t\twidth:domEv.offsetWidth, height:domEv.offsetHeight };\r\n\t}\r\n\treturn null;\r\n};\r\n\r\ngantt._fill_quick_data  = function(id){\r\n\tvar ev = gantt.getTask(id);\r\n\tvar qi = gantt._quick_info_box;\r\n\r\n\tgantt._quick_info_box_id = id;\r\n\r\n//title content\r\n\r\n\tvar header = {\r\n\t\tcontent: gantt.templates.quick_info_title(ev.start_date, ev.end_date, ev),\r\n\t\tdate: gantt.templates.quick_info_date(ev.start_date, ev.end_date, ev)\r\n\t};\r\n\tvar titleContent = qi.firstChild.firstChild;\r\n\ttitleContent.innerHTML = header.content;\r\n\tvar titleDate = titleContent.nextSibling;\r\n\ttitleDate.innerHTML = header.date;\r\n\r\n\r\n\tgantt._waiAria.quickInfoHeader(qi, [header.content, header.date].join(\" \"));\r\n\r\n//main content\r\n\tvar main = qi.firstChild.nextSibling;\r\n\tmain.innerHTML = gantt.templates.quick_info_content(ev.start_date, ev.end_date, ev);\r\n};\r\n"],"sourceRoot":""}